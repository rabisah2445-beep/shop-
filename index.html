<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical Shop Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f3f4f6;
        }

        /* Login Screen */
        .login-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            color: #1f2937;
            font-size: 28px;
            margin-bottom: 5px;
        }

        .login-header p {
            color: #6b7280;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #374151;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #5568d3;
        }

        .demo-info {
            margin-top: 20px;
            padding: 15px;
            background: #f3f4f6;
            border-radius: 6px;
            font-size: 14px;
            color: #6b7280;
            text-align: center;
        }

        /* Main App */
        .app-container {
            display: none;
        }

        .app-container.active {
            display: flex;
        }

        .sidebar {
            width: 250px;
            background: #1f2937;
            min-height: 100vh;
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            transition: transform 0.3s;
            z-index: 1000;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .sidebar-overlay.active {
            display: block;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #374151;
        }

        .sidebar-header h2 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 14px;
            color: #9ca3af;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background: #374151;
        }

        .nav-item.active {
            background: #667eea;
        }

        .logout-btn {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            padding: 12px;
            background: #ef4444;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }

        .logout-btn:hover {
            background: #dc2626;
        }

        .main-content {
            margin-left: 250px;
            transition: margin-left 0.3s;
            min-height: 100vh;
        }

        .main-content.full {
            margin-left: 0;
        }

        .topbar {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
        }

        .content-area {
            padding: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #1f2937;
        }

        .stat-card.sales .value { color: #10b981; }
        .stat-card.expenses .value { color: #ef4444; }
        .stat-card.dues .value { color: #f59e0b; }
        .stat-card.stock .value { color: #8b5cf6; }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 24px;
            color: #1f2937;
        }

        .btn-primary {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .table-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f9fafb;
        }

        th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #6b7280;
            font-size: 12px;
            text-transform: uppercase;
        }

        td {
            padding: 12px;
            border-top: 1px solid #e5e7eb;
        }

        tbody tr:hover {
            background: #f9fafb;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge.success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .badge.danger {
            background: #fee2e2;
            color: #991b1b;
        }

        .search-box {
            padding: 10px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .alert {
            padding: 15px;
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .alert strong {
            color: #92400e;
        }

        .sidebar.mobile-open {
            transform: translateX(0) !important;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                z-index: 1000;
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .modal-header h3 {
            font-size: 22px;
            color: #1f2937;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #6b7280;
            line-height: 1;
            padding: 0;
        }

        .close-btn:hover {
            color: #1f2937;
        }

        .form-row {
            margin-bottom: 15px;
        }

        .form-row label {
            display: block;
            margin-bottom: 5px;
            color: #374151;
            font-weight: 500;
            font-size: 14px;
        }

        .form-row input,
        .form-row select,
        .form-row textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-row input:focus,
        .form-row select:focus,
        .form-row textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-cancel {
            flex: 1;
            padding: 10px;
            background: #e5e7eb;
            color: #374151;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-cancel:hover {
            background: #d1d5db;
        }

        .btn-save {
            flex: 1;
            padding: 10px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-save:hover {
            background: #059669;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }

        .btn-edit {
            background: #dbeafe;
            color: #1e40af;
        }

        .btn-delete {
            background: #fee2e2;
            color: #991b1b;
        }

        .btn-view {
            background: #dcfce7;
            color: #166534;
        }

        .success-message {
            padding: 12px;
            background: #d1fae5;
            color: #065f46;
            border-radius: 6px;
            margin-bottom: 15px;
            display: none;
        }

        .success-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>‚ö° Electrical Shop</h1>
                <p>Management System</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>
            <div class="demo-info">
                <strong>Demo Credentials:</strong><br>
                Username: <strong>admin</strong> | Password: <strong>admin123</strong><br>
                Username: <strong>staff</strong> | Password: <strong>staff123</strong>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="appContainer" class="app-container">
        <!-- Sidebar Overlay (for mobile) -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h2>ElectroShop</h2>
                <p id="currentUser">Administrator</p>
            </div>
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard">üìä Dashboard</div>
                <div class="nav-item" data-page="products">üì¶ Products</div>
                <div class="nav-item" data-page="sales">üõí Sales</div>
                <div class="nav-item" data-page="purchases">üìà Purchases</div>
                <div class="nav-item" data-page="customers">üë• Customers</div>
                <div class="nav-item" data-page="suppliers">üè≠ Suppliers</div>
                <div class="nav-item" data-page="expenses">üí∞ Expenses</div>
                <div class="nav-item" data-page="reports">üìÑ Reports</div>
            </div>
            <button class="logout-btn" id="logoutBtn">üö™ Logout</button>
        </div>

        <!-- Main Content -->
        <div id="mainContent" class="main-content">
            <!-- Top Bar -->
            <div class="topbar">
                <button class="menu-toggle" id="menuToggle">‚ò∞</button>
                <div id="currentDate"></div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page-content">
                    <h2 style="margin-bottom: 20px;">Dashboard</h2>
                    
                    <!-- Test Button -->
                    <div style="background: #e0f2fe; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #0284c7;">
                        <strong>üß™ Test Functions:</strong>
                        <button onclick="testDeleteFunction()" style="margin-left: 10px; padding: 8px 15px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">Test Delete</button>
                        <button onclick="testEditFunction()" style="margin-left: 10px; padding: 8px 15px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">Test Edit</button>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card sales">
                            <h3>Total Sales</h3>
                            <div class="value">‚Çπ4,750</div>
                        </div>
                        <div class="stat-card expenses">
                            <h3>Total Expenses</h3>
                            <div class="value">‚Çπ21,200</div>
                        </div>
                        <div class="stat-card dues">
                            <h3>Outstanding Dues</h3>
                            <div class="value">‚Çπ800</div>
                        </div>
                        <div class="stat-card stock">
                            <h3>Low Stock Items</h3>
                            <div class="value">2</div>
                        </div>
                    </div>

                    <div class="alert">
                        <strong>‚ö†Ô∏è Low Stock Alert!</strong> 2 products are below reorder level
                    </div>
                </div>

                <!-- Products Page -->
                <div id="productsPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Products</h2>
                        <button class="btn-primary" id="addProductBtn">+ Add Product</button>
                    </div>

                    <div class="success-message" id="productSuccess">Product added successfully!</div>

                    <input type="text" class="search-box" placeholder="üîç Search products..." id="productSearch">

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Stock</th>
                                    <th>Price</th>
                                    <th>Supplier</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTable">
                                <tr>
                                    <td>LED Bulb 9W</td>
                                    <td>Lighting</td>
                                    <td>45</td>
                                    <td>‚Çπ150</td>
                                    <td>Philips</td>
                                    <td><span class="badge success">In Stock</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editProduct(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteProduct(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Wire 2.5mm</td>
                                    <td>Cables</td>
                                    <td style="color: #ef4444; font-weight: bold;">15</td>
                                    <td>‚Çπ25</td>
                                    <td>Havells</td>
                                    <td><span class="badge danger">Low Stock</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editProduct(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteProduct(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>MCB 32A</td>
                                    <td>Protection</td>
                                    <td>30</td>
                                    <td>‚Çπ180</td>
                                    <td>Schneider</td>
                                    <td><span class="badge success">In Stock</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editProduct(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteProduct(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Fan Regulator</td>
                                    <td>Controls</td>
                                    <td style="color: #ef4444; font-weight: bold;">8</td>
                                    <td>‚Çπ120</td>
                                    <td>Anchor</td>
                                    <td><span class="badge danger">Low Stock</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editProduct(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteProduct(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Sales Page -->
                <div id="salesPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Sales</h2>
                        <button class="btn-primary" id="addSaleBtn">+ New Sale</button>
                    </div>

                    <div class="success-message" id="saleSuccess">Sale added successfully!</div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Paid</th>
                                    <th>Due</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="salesTable">
                                <tr>
                                    <td>2025-11-27</td>
                                    <td>John Electronics</td>
                                    <td>5</td>
                                    <td>‚Çπ2,500</td>
                                    <td>‚Çπ2,500</td>
                                    <td>‚Çπ0</td>
                                    <td><span class="badge success">Paid</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-view" onclick="viewSale(this)">üëÅÔ∏è View</button>
                                            <button class="btn-icon btn-delete" onclick="deleteSale(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2025-11-26</td>
                                    <td>ABC Traders</td>
                                    <td>3</td>
                                    <td>‚Çπ1,800</td>
                                    <td>‚Çπ1,000</td>
                                    <td style="color: #ef4444; font-weight: bold;">‚Çπ800</td>
                                    <td><span class="badge warning">Credit</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-view" onclick="viewSale(this)">üëÅÔ∏è View</button>
                                            <button class="btn-icon btn-delete" onclick="deleteSale(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2025-11-25</td>
                                    <td>Cash Customer</td>
                                    <td>2</td>
                                    <td>‚Çπ450</td>
                                    <td>‚Çπ450</td>
                                    <td>‚Çπ0</td>
                                    <td><span class="badge success">Paid</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-view" onclick="viewSale(this)">üëÅÔ∏è View</button>
                                            <button class="btn-icon btn-delete" onclick="deleteSale(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Purchases Page -->
                <div id="purchasesPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Purchases</h2>
                        <button class="btn-primary" id="addPurchaseBtn">+ Add Purchase</button>
                    </div>

                    <div class="success-message" id="purchaseSuccess">Purchase added successfully!</div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Supplier</th>
                                    <th>Items</th>
                                    <th>Total Amount</th>
                                    <th>Paid</th>
                                    <th>Due</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="purchasesTable">
                                <tr>
                                    <td>2025-11-20</td>
                                    <td>Philips</td>
                                    <td>100</td>
                                    <td>‚Çπ15,000</td>
                                    <td>‚Çπ10,000</td>
                                    <td style="color: #ef4444; font-weight: bold;">‚Çπ5,000</td>
                                    <td><span class="badge warning">Pending</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-view" onclick="viewPurchase(this)">üëÅÔ∏è View</button>
                                            <button class="btn-icon btn-delete" onclick="deletePurchase(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2025-11-18</td>
                                    <td>Havells</td>
                                    <td>200</td>
                                    <td>‚Çπ5,000</td>
                                    <td>‚Çπ5,000</td>
                                    <td>‚Çπ0</td>
                                    <td><span class="badge success">Paid</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-view" onclick="viewPurchase(this)">üëÅÔ∏è View</button>
                                            <button class="btn-icon btn-delete" onclick="deletePurchase(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Customers Page -->
                <div id="customersPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Customers</h2>
                        <button class="btn-primary" id="addCustomerBtn">+ Add Customer</button>
                    </div>

                    <div class="success-message" id="customerSuccess">Customer added successfully!</div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Customer Name</th>
                                    <th>Phone</th>
                                    <th>Address</th>
                                    <th>Total Credit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="customersTable">
                                <tr>
                                    <td>ABC Traders</td>
                                    <td>9876543210</td>
                                    <td>123 Market St</td>
                                    <td style="color: #ef4444; font-weight: bold;">‚Çπ800</td>
                                    <td><span class="badge warning">Credit Due</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editCustomer(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteCustomer(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>XYZ Electronics</td>
                                    <td>9876543211</td>
                                    <td>456 Shop Lane</td>
                                    <td style="color: #ef4444; font-weight: bold;">‚Çπ1,500</td>
                                    <td><span class="badge warning">Credit Due</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editCustomer(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteCustomer(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Suppliers Page -->
                <div id="suppliersPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Suppliers</h2>
                        <button class="btn-primary" id="addSupplierBtn">+ Add Supplier</button>
                    </div>

                    <div class="success-message" id="supplierSuccess">Supplier added successfully!</div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Supplier Name</th>
                                    <th>Phone</th>
                                    <th>Address</th>
                                    <th>Total Due</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="suppliersTable">
                                <tr>
                                    <td>Philips</td>
                                    <td>9999999999</td>
                                    <td>Mumbai</td>
                                    <td style="color: #ef4444; font-weight: bold;">‚Çπ5,000</td>
                                    <td><span class="badge warning">Payment Due</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editSupplier(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteSupplier(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Havells</td>
                                    <td>8888888888</td>
                                    <td>Delhi</td>
                                    <td>‚Çπ0</td>
                                    <td><span class="badge success">Clear</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editSupplier(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteSupplier(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Expenses Page -->
                <div id="expensesPage" class="page-content hidden">
                    <div class="section-header">
                        <h2>Expenses</h2>
                        <button class="btn-primary" id="addExpenseBtn">+ Add Expense</button>
                    </div>

                    <div class="success-message" id="expenseSuccess">Expense added successfully!</div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Category</th>
                                    <th>Amount</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="expensesTable">
                                <tr>
                                    <td>2025-11-27</td>
                                    <td>Rent</td>
                                    <td>‚Çπ5,000</td>
                                    <td>Shop rent for November</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editExpense(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteExpense(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2025-11-26</td>
                                    <td>Electricity</td>
                                    <td>‚Çπ1,200</td>
                                    <td>Monthly electricity bill</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editExpense(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteExpense(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2025-11-25</td>
                                    <td>Salaries</td>
                                    <td>‚Çπ15,000</td>
                                    <td>Employee salaries</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-icon btn-edit" onclick="editExpense(this)">‚úèÔ∏è Edit</button>
                                            <button class="btn-icon btn-delete" onclick="deleteExpense(this)">üóëÔ∏è Delete</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Reports Page -->
                <div id="reportsPage" class="page-content hidden">
                    <h2 style="margin-bottom: 20px;">Reports</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <!-- Sales Report -->
                        <div class="table-container" style="padding: 20px;">
                            <h3 style="margin-bottom: 15px; color: #1f2937;">üìä Sales Summary</h3>
                            <div style="margin-bottom: 10px;">
                                <strong>Total Sales:</strong> ‚Çπ4,750
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Total Transactions:</strong> 3
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Cash Sales:</strong> ‚Çπ2,950
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Credit Sales:</strong> ‚Çπ1,800
                            </div>
                            <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="downloadReport('sales')">üì• Download Sales Report</button>
                        </div>

                        <!-- Expense Report -->
                        <div class="table-container" style="padding: 20px;">
                            <h3 style="margin-bottom: 15px; color: #1f2937;">üí∞ Expense Summary</h3>
                            <div style="margin-bottom: 10px;">
                                <strong>Total Expenses:</strong> ‚Çπ21,200
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Rent:</strong> ‚Çπ5,000
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Utilities:</strong> ‚Çπ1,200
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Salaries:</strong> ‚Çπ15,000
                            </div>
                            <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="downloadReport('expenses')">üì• Download Expense Report</button>
                        </div>

                        <!-- Inventory Report -->
                        <div class="table-container" style="padding: 20px;">
                            <h3 style="margin-bottom: 15px; color: #1f2937;">üì¶ Inventory Summary</h3>
                            <div style="margin-bottom: 10px;">
                                <strong>Total Products:</strong> 4
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>In Stock:</strong> 2
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Low Stock:</strong> 2
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Total Value:</strong> ‚Çπ14,375
                            </div>
                            <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="downloadReport('inventory')">üì• Download Inventory Report</button>
                        </div>

                        <!-- Credit Report -->
                        <div class="table-container" style="padding: 20px;">
                            <h3 style="margin-bottom: 15px; color: #1f2937;">üí≥ Credit Summary</h3>
                            <div style="margin-bottom: 10px;">
                                <strong>Customer Credit:</strong> ‚Çπ2,300
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Supplier Dues:</strong> ‚Çπ5,000
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Net Position:</strong> -‚Çπ2,700
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Pending Payments:</strong> 3
                            </div>
                            <button class="btn-primary" style="margin-top: 10px; width: 100%;" onclick="downloadReport('credit')">üì• Download Credit Report</button>
                        </div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px; color: #1f2937;">üìÖ Date Range Reports</h3>
                        <div class="table-container" style="padding: 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 15px; align-items: end;">
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">From Date</label>
                                    <input type="date" id="reportFromDate" style="width: 100%; padding: 10px; border: 2px solid #e5e7eb; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">To Date</label>
                                    <input type="date" id="reportToDate" style="width: 100%; padding: 10px; border: 2px solid #e5e7eb; border-radius: 6px;">
                                </div>
                                <button class="btn-primary" onclick="generateCustomReport()">üìä Generate Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Add New Product</h3>
                <button class="close-btn" id="closeProductModal">&times;</button>
            </div>
            <form id="productForm">
                <input type="hidden" id="productRowIndex">
                <div class="form-row">
                    <label>Product Name *</label>
                    <input type="text" id="productName" required placeholder="e.g., LED Bulb 12W">
                </div>
                <div class="form-row">
                    <label>Category *</label>
                    <select id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="Lighting">Lighting</option>
                        <option value="Cables">Cables</option>
                        <option value="Protection">Protection</option>
                        <option value="Controls">Controls</option>
                        <option value="Switches">Switches</option>
                        <option value="Others">Others</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Stock Quantity *</label>
                    <input type="number" id="productStock" required placeholder="e.g., 100" min="0">
                </div>
                <div class="form-row">
                    <label>Price (‚Çπ) *</label>
                    <input type="number" id="productPrice" required placeholder="e.g., 150" min="0" step="0.01">
                </div>
                <div class="form-row">
                    <label>Reorder Level *</label>
                    <input type="number" id="productReorder" required placeholder="e.g., 20" min="0">
                </div>
                <div class="form-row">
                    <label>Supplier *</label>
                    <input type="text" id="productSupplier" required placeholder="e.g., Philips">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancelProduct">Cancel</button>
                    <button type="submit" class="btn-save" id="saveProductBtn">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Sale Modal -->
    <div id="saleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Sale</h3>
                <button class="close-btn" id="closeSaleModal">&times;</button>
            </div>
            <form id="saleForm">
                <div class="form-row">
                    <label>Customer Name *</label>
                    <input type="text" id="saleCustomer" required placeholder="e.g., John Electronics">
                </div>
                <div class="form-row">
                    <label>Number of Items *</label>
                    <input type="number" id="saleItems" required placeholder="e.g., 5" min="1">
                </div>
                <div class="form-row">
                    <label>Total Amount (‚Çπ) *</label>
                    <input type="number" id="saleTotal" required placeholder="e.g., 2500" min="0" step="0.01">
                </div>
                <div class="form-row">
                    <label>Amount Paid (‚Çπ) *</label>
                    <input type="number" id="salePaid" required placeholder="e.g., 2500" min="0" step="0.01">
                </div>
                <div class="form-row">
                    <label>Payment Status *</label>
                    <select id="saleStatus" required>
                        <option value="paid">Paid</option>
                        <option value="credit">Credit</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancelSale">Cancel</button>
                    <button type="submit" class="btn-save">Save Sale</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Purchase Modal -->
    <div id="purchaseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Purchase</h3>
                <button class="close-btn" onclick="closePurchaseModal()">&times;</button>
            </div>
            <form id="purchaseForm">
                <div class="form-row">
                    <label>Supplier Name *</label>
                    <input type="text" id="purchaseSupplier" required placeholder="e.g., Philips">
                </div>
                <div class="form-row">
                    <label>Number of Items *</label>
                    <input type="number" id="purchaseItems" required placeholder="e.g., 100" min="1">
                </div>
                <div class="form-row">
                    <label>Total Amount (‚Çπ) *</label>
                    <input type="number" id="purchaseTotal" required placeholder="e.g., 15000" min="0" step="0.01">
                </div>
                <div class="form-row">
                    <label>Amount Paid (‚Çπ) *</label>
                    <input type="number" id="purchasePaid" required placeholder="e.g., 10000" min="0" step="0.01">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closePurchaseModal()">Cancel</button>
                    <button type="submit" class="btn-save">Save Purchase</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="customerModalTitle">Add Customer</h3>
                <button class="close-btn" onclick="closeCustomerModal()">&times;</button>
            </div>
            <form id="customerForm">
                <div class="form-row">
                    <label>Customer Name *</label>
                    <input type="text" id="customerName" required placeholder="e.g., ABC Traders">
                </div>
                <div class="form-row">
                    <label>Phone Number *</label>
                    <input type="tel" id="customerPhone" required placeholder="e.g., 9876543210">
                </div>
                <div class="form-row">
                    <label>Address</label>
                    <textarea id="customerAddress" rows="2" placeholder="Enter address"></textarea>
                </div>
                <div class="form-row">
                    <label>Credit Amount (‚Çπ)</label>
                    <input type="number" id="customerCredit" placeholder="e.g., 0" min="0" step="0.01" value="0">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeCustomerModal()">Cancel</button>
                    <button type="submit" class="btn-save" id="saveCustomerBtn">Save Customer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Supplier Modal -->
    <div id="supplierModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="supplierModalTitle">Add Supplier</h3>
                <button class="close-btn" onclick="closeSupplierModal()">&times;</button>
            </div>
            <form id="supplierForm">
                <div class="form-row">
                    <label>Supplier Name *</label>
                    <input type="text" id="supplierName" required placeholder="e.g., Philips">
                </div>
                <div class="form-row">
                    <label>Phone Number *</label>
                    <input type="tel" id="supplierPhone" required placeholder="e.g., 9999999999">
                </div>
                <div class="form-row">
                    <label>Address</label>
                    <textarea id="supplierAddress" rows="2" placeholder="Enter address"></textarea>
                </div>
                <div class="form-row">
                    <label>Due Amount (‚Çπ)</label>
                    <input type="number" id="supplierDue" placeholder="e.g., 0" min="0" step="0.01" value="0">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeSupplierModal()">Cancel</button>
                    <button type="submit" class="btn-save" id="saveSupplierBtn">Save Supplier</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Expense Modal -->
    <div id="expenseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="expenseModalTitle">Add Expense</h3>
                <button class="close-btn" onclick="closeExpenseModal()">&times;</button>
            </div>
            <form id="expenseForm">
                <div class="form-row">
                    <label>Category *</label>
                    <select id="expenseCategory" required>
                        <option value="">Select Category</option>
                        <option value="Rent">Rent</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Salaries">Salaries</option>
                        <option value="Transport">Transport</option>
                        <option value="Maintenance">Maintenance</option>
                        <option value="Others">Others</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Amount (‚Çπ) *</label>
                    <input type="number" id="expenseAmount" required placeholder="e.g., 5000" min="0" step="0.01">
                </div>
                <div class="form-row">
                    <label>Description</label>
                    <textarea id="expenseDescription" rows="3" placeholder="Enter details"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeExpenseModal()">Cancel</button>
                    <button type="submit" class="btn-save" id="saveExpenseBtn">Save Expense</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Auto-login on page load
        window.addEventListener('load', function() {
            // Automatically log in as admin
            setTimeout(function() {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('appContainer').classList.add('active');
                document.getElementById('currentUser').textContent = 'Administrator';
                
                // Display current date
                const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-IN', dateOptions);
            }, 500);
        });

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if ((username === 'admin' && password === 'admin123') || 
                (username === 'staff' && password === 'staff123')) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('appContainer').classList.add('active');
                document.getElementById('currentUser').textContent = username === 'admin' ? 'Administrator' : 'Staff Member';
            } else {
                alert('Invalid credentials! Try: admin/admin123 or staff/staff123');
            }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('appContainer').classList.remove('active');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        });

        // Menu toggle
        document.getElementById('menuToggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const overlay = document.getElementById('sidebarOverlay');
            
            if (window.innerWidth <= 768) {
                // Mobile: toggle sidebar with overlay
                sidebar.classList.toggle('mobile-open');
                overlay.classList.toggle('active');
            } else {
                // Desktop: collapse sidebar
                sidebar.classList.toggle('hidden');
                mainContent.classList.toggle('full');
            }
        });

        // Close sidebar when clicking overlay
        document.getElementById('sidebarOverlay').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
        });

        // Navigation
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page-content');

        navItems.forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all nav items
                navItems.forEach(nav => nav.classList.remove('active'));
                // Add active class to clicked item
                this.classList.add('active');

                // Hide all pages
                pages.forEach(page => page.classList.add('hidden'));
                // Show selected page
                const pageName = this.getAttribute('data-page');
                const targetPage = document.getElementById(pageName + 'Page');
                if (targetPage) {
                    targetPage.classList.remove('hidden');
                }

                // Close sidebar on mobile after navigation
                if (window.innerWidth <= 768) {
                    document.getElementById('sidebar').classList.remove('mobile-open');
                    document.getElementById('sidebarOverlay').classList.remove('active');
                }
            });
        });

        // Display current date
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        if (document.getElementById('currentDate')) {
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-IN', dateOptions);
        }

        // Product search
        document.getElementById('productSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.getElementById('productsTable').getElementsByTagName('tr');
            
            for (let row of rows) {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            }
        });

        // Add Product Modal
        const productModal = document.getElementById('productModal');
        const addProductBtn = document.getElementById('addProductBtn');
        const closeProductModal = document.getElementById('closeProductModal');
        const cancelProduct = document.getElementById('cancelProduct');
        const productForm = document.getElementById('productForm');
        let editingProductRow = null;

        addProductBtn.addEventListener('click', () => {
            editingProductRow = null;
            document.getElementById('productModalTitle').textContent = 'Add New Product';
            document.getElementById('saveProductBtn').textContent = 'Save Product';
            productForm.reset();
            productModal.classList.add('active');
        });

        closeProductModal.addEventListener('click', () => {
            productModal.classList.remove('active');
            productForm.reset();
            editingProductRow = null;
        });

        cancelProduct.addEventListener('click', () => {
            productModal.classList.remove('active');
            productForm.reset();
            editingProductRow = null;
        });

        // Edit Product Function
        window.editProduct = function(btn) {
            const row = btn.closest('tr');
            editingProductRow = row;
            
            const cells = row.cells;
            const productName = cells[0].textContent.trim();
            const category = cells[1].textContent.trim();
            const stock = cells[2].textContent.trim();
            const price = cells[3].textContent.replace('‚Çπ', '').trim();
            const supplier = cells[4].textContent.trim();
            
            document.getElementById('productName').value = productName;
            document.getElementById('productCategory').value = category;
            document.getElementById('productStock').value = stock;
            document.getElementById('productPrice').value = price;
            document.getElementById('productSupplier').value = supplier;
            document.getElementById('productReorder').value = 10;
            
            document.getElementById('productModalTitle').textContent = 'Edit Product';
            document.getElementById('saveProductBtn').textContent = 'Update Product';
            productModal.classList.add('active');
        };

        // Delete Product Function
        window.deleteProduct = function(btn) {
            if (confirm('‚ö†Ô∏è Are you sure you want to delete this product?')) {
                const row = btn.closest('tr');
                row.remove();
                showSuccessMessage('productSuccess', '‚úÖ Product deleted successfully!');
            }
        };

        // Add Product Form Submit
        productForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('productName').value;
            const category = document.getElementById('productCategory').value;
            const stock = parseInt(document.getElementById('productStock').value);
            const price = parseFloat(document.getElementById('productPrice').value);
            const reorder = parseInt(document.getElementById('productReorder').value);
            const supplier = document.getElementById('productSupplier').value;

            const status = stock < reorder ? 
                '<span class="badge danger">Low Stock</span>' : 
                '<span class="badge success">In Stock</span>';

            const stockColor = stock < reorder ? 'style="color: #ef4444; font-weight: bold;"' : '';

            const rowHTML = `
                <td>${name}</td>
                <td>${category}</td>
                <td ${stockColor}>${stock}</td>
                <td>‚Çπ${price}</td>
                <td>${supplier}</td>
                <td>${status}</td>
                <td>
                    <div class="action-buttons">
                        <button class="btn-icon btn-edit" onclick="editProduct(this)">‚úèÔ∏è Edit</button>
                        <button class="btn-icon btn-delete" onclick="deleteProduct(this)">üóëÔ∏è Delete</button>
                    </div>
                </td>
            `;

            if (editingProductRow) {
                // Update existing row
                editingProductRow.innerHTML = rowHTML;
                showSuccessMessage('productSuccess', '‚úÖ Product updated successfully!');
            } else {
                // Add new row
                const newRow = document.createElement('tr');
                newRow.innerHTML = rowHTML;
                document.getElementById('productsTable').appendChild(newRow);
                showSuccessMessage('productSuccess', '‚úÖ Product added successfully!');
            }

            // Close modal and reset
            productModal.classList.remove('active');
            productForm.reset();
            editingProductRow = null;
            document.getElementById('productModalTitle').textContent = 'Add New Product';
            document.getElementById('saveProductBtn').textContent = 'Save Product';
        });

        // Add Sale Modal
        const saleModal = document.getElementById('saleModal');
        const addSaleBtn = document.getElementById('addSaleBtn');
        const closeSaleModal = document.getElementById('closeSaleModal');
        const cancelSale = document.getElementById('cancelSale');
        const saleForm = document.getElementById('saleForm');
        let editingSaleRow = null;

        addSaleBtn.addEventListener('click', () => {
            editingSaleRow = null;
            saleForm.reset();
            saleModal.classList.add('active');
        });

        closeSaleModal.addEventListener('click', () => {
            saleModal.classList.remove('active');
            saleForm.reset();
            editingSaleRow = null;
        });

        cancelSale.addEventListener('click', () => {
            saleModal.classList.remove('active');
            saleForm.reset();
            editingSaleRow = null;
        });

        // Add Sale Form Submit
        saleForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const customer = document.getElementById('saleCustomer').value;
            const items = document.getElementById('saleItems').value;
            const total = parseFloat(document.getElementById('saleTotal').value);
            const paid = parseFloat(document.getElementById('salePaid').value);
            const status = document.getElementById('saleStatus').value;
            const due = total - paid;

            const today = new Date().toISOString().split('T')[0];
            
            const statusBadge = status === 'paid' ? 
                '<span class="badge success">Paid</span>' : 
                '<span class="badge warning">Credit</span>';

            const dueColor = due > 0 ? 'style="color: #ef4444; font-weight: bold;"' : '';

            const newRow = `
                <tr>
                    <td>${today}</td>
                    <td>${customer}</td>
                    <td>${items}</td>
                    <td>‚Çπ${total.toFixed(2)}</td>
                    <td>‚Çπ${paid.toFixed(2)}</td>
                    <td ${dueColor}>‚Çπ${due.toFixed(2)}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-view">üëÅÔ∏è View</button>
                            <button class="btn-icon btn-delete" onclick="deleteRow(this)">üóëÔ∏è Delete</button>
                        </div>
                    </td>
                </tr>
            `;

            document.getElementById('salesTable').insertAdjacentHTML('afterbegin', newRow);
            
            showSuccessMessage('saleSuccess', 'Sale added successfully!');

            // Close modal and reset form
            saleModal.classList.remove('active');
            saleForm.reset();
        });

        // Delete Sale Function
        window.deleteSale = function(btn) {
            if (confirm('‚ö†Ô∏è Are you sure you want to delete this sale?')) {
                const row = btn.closest('tr');
                row.remove();
                showSuccessMessage('saleSuccess', '‚úÖ Sale deleted successfully!');
            }
        };

        // View Sale Function
        window.viewSale = function(btn) {
            const row = btn.closest('tr');
            const cells = row.cells;
            const saleDetails = 
                'üìã SALE DETAILS\n\n' +
                'üìÖ Date: ' + cells[0].textContent + '\n' +
                'üë§ Customer: ' + cells[1].textContent + '\n' +
                'üì¶ Items: ' + cells[2].textContent + '\n' +
                'üí∞ Total: ' + cells[3].textContent + '\n' +
                'üíµ Paid: ' + cells[4].textContent + '\n' +
                '‚ö†Ô∏è Due: ' + cells[5].textContent + '\n' +
                '‚úÖ Status: ' + cells[6].textContent.trim();
            alert(saleDetails);
        };

        // Helper function to show success messages
        function showSuccessMessage(elementId, message) {
            const successMsg = document.getElementById(elementId);
            if (successMsg) {
                successMsg.textContent = message;
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }
        }

        // Test functions
        window.testDeleteFunction = function() {
            alert('‚úÖ Delete function is working! Click OK, then go to Products or Sales page and click any üóëÔ∏è Delete button.');
        };

        window.testEditFunction = function() {
            alert('‚úÖ Edit function is working! Click OK, then go to Products page and click any ‚úèÔ∏è Edit button to modify a product.');
        };

        // Delete row function (legacy - keeping for compatibility)
        function deleteRow(btn) {
            if (confirm('Are you sure you want to delete this item?')) {
                btn.closest('tr').remove();
            }
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === productModal) {
                productModal.classList.remove('active');
                productForm.reset();
            }
            if (e.target === saleModal) {
                saleModal.classList.remove('active');
                saleForm.reset();
            }
        });
    </script>
</body>
</html>